{"ast":null,"code":"import _classCallCheck from\"G:/Documents/GitHub/facerecognitionapp/smart_brain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"G:/Documents/GitHub/facerecognitionapp/smart_brain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"G:/Documents/GitHub/facerecognitionapp/smart_brain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"G:/Documents/GitHub/facerecognitionapp/smart_brain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Navigation from'./components/navigation/Navigation';import FaceRecognition from'./components/faceRecognition/FaceRecognition';import Logo from'./components/logo/Logo';import SignIn from'./components/signIn/SignIn';import Rank from'./components/rank/Rank';import Register from'./components/register/Register';import Particles from'react-particles-js';import ImageLinkForm from'./components/imageLinkForm/ImageLinkForm';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var particlesOptions={particles:{number:{value:10,density:{enable:true,value_area:600}},color:{value:\"red\"}},line_linked:{enable_auto:true}};var initialState={input:\"\",imageUrl:\"\",box:{},route:'SignIn',isSignedIn:false,user:{id:'',name:\"\",email:\"\",entries:0,joined:\"\"}};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};_this.calculateFaceLocation=function(data){var clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;var image=document.getElementById(\"inputImage\");var width=Number(image.width);var height=Number(image.height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};};_this.displayFaceBox=function(box){_this.setState({box:box});};_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.onButtonSubmit=function(){_this.setState({imageUrl:_this.state.input});fetch('https://smart-brain-faceapp1.herokuapp.com/imageurl',{//fetch for api call to clarifai on server.js [done on the back end to hide the api key]\nmethod:'post',headers:{'content-Type':'application/json'},body:JSON.stringify({input:_this.state.input})}).then(function(response){return response.json();}).then(function(response){// get the response which gets passed into the calculateFaceLocation function which in turn returns an object which gets passed into the displayFaceBox function to apply the result to the box state\nif(response){fetch('https://smart-brain-faceapp1.herokuapp.com/image',{method:'put',headers:{'content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})}).then(function(response){return response.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));}).catch(console.log);}_this.displayFaceBox(_this.calculateFaceLocation(response));}).catch(function(err){return console.log(err);});//catch any error and console log the error\n};_this.onRouteChange=function(route){if(route==='SignOut'){_this.setState(initialState);}else if(route==='home'){_this.setState({isSignedIn:true});}_this.setState({route:route});};_this.state={input:\"\",imageUrl:\"\",box:{},route:'SignIn',isSignedIn:false,user:{id:'',name:\"\",email:\"\",entries:0,joined:\"\"}};return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this$state=this.state,isSignedIn=_this$state.isSignedIn,imageUrl=_this$state.imageUrl,route=_this$state.route,box=_this$state.box;// destructure states to avoid having to repeatedly type this.state.\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Particles,{className:\"particles\",params:particlesOptions}),/*#__PURE__*/_jsx(Navigation,{isSignedIn:isSignedIn,onRouteChange:this.onRouteChange}),route==='home'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit}),/*#__PURE__*/_jsx(FaceRecognition,{box:box,imageUrl:imageUrl})]}):route==='SignIn'?/*#__PURE__*/_jsx(SignIn,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/_jsx(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["G:/Documents/GitHub/facerecognitionapp/smart_brain/src/App.js"],"names":["React","Component","Navigation","FaceRecognition","Logo","SignIn","Rank","Register","Particles","ImageLinkForm","particlesOptions","particles","number","value","density","enable","value_area","color","line_linked","enable_auto","initialState","input","imageUrl","box","route","isSignedIn","user","id","name","email","entries","joined","App","loadUser","data","setState","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","onInputChange","event","target","onButtonSubmit","state","fetch","method","headers","body","JSON","stringify","then","response","json","count","Object","assign","catch","console","log","err","onRouteChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Navigation from './components/navigation/Navigation'\nimport FaceRecognition from './components/faceRecognition/FaceRecognition'\nimport Logo from './components/logo/Logo'\nimport SignIn from './components/signIn/SignIn'\nimport Rank from './components/rank/Rank'\nimport Register from './components/register/Register'\nimport Particles from 'react-particles-js';\nimport ImageLinkForm from './components/imageLinkForm/ImageLinkForm'\nimport './App.css';\n\n\n\n\nconst particlesOptions = {\n  particles: {\n    number: {\n      value: 10,\n      density: {\n        enable: true,\n        value_area: 600,\n      }\n    },\n    color: {\n      value: \"red\"\n    }\n  },\n  line_linked:{\n    enable_auto: true,\n  }\n}\nconst initialState = {\n  input: \"\",\n  imageUrl: \"\",\n  box: {},\n  route: 'SignIn',\n  isSignedIn: false,\n  user: {\n    id: '',\n    name: \"\",\n    email: \"\",\n    entries: 0,\n    joined: \"\"\n  }\n}\nclass App extends Component {\n  constructor(){\n    super();\n    this.state = {\n      input: \"\",\n      imageUrl: \"\",\n      box: {},\n      route: 'SignIn',\n      isSignedIn: false,\n      user: {\n        id: '',\n        name: \"\",\n        email: \"\",\n        entries: 0,\n        joined: \"\"\n      }\n    }\n  }\n\n  loadUser = (data) => {\n    this.setState({user: {\n      id: data.id,\n      name: data.name,\n      email: data.email,\n      entries: data.entries,\n      joined: data.joined\n    }})\n  }\n\n\n  calculateFaceLocation = (data) => {\n    const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box\n    const image = document.getElementById(\"inputImage\")\n    const width = Number(image.width)\n    const height = Number(image.height)\n    return {\n      leftCol: clarifaiFace.left_col * width,\n      topRow: clarifaiFace.top_row * height,\n      rightCol: width - (clarifaiFace.right_col * width),\n      bottomRow: height - (clarifaiFace.bottom_row * height)\n    }\n  }\n\n  displayFaceBox = (box) => {\n    this.setState({box: box})\n  }\n\n  onInputChange = (event) =>{\n    this.setState({input: event.target.value})\n  }\n\n  onButtonSubmit = () =>{\n    this.setState({imageUrl: this.state.input})\n    fetch('https://smart-brain-faceapp1.herokuapp.com/imageurl', { //fetch for api call to clarifai on server.js [done on the back end to hide the api key]\n      method: 'post',\n      headers: {'content-Type': 'application/json'},\n      body: JSON.stringify({\n          input : this.state.input\n      })\n    })\n    .then(response => response.json())\n    .then( response => { // get the response which gets passed into the calculateFaceLocation function which in turn returns an object which gets passed into the displayFaceBox function to apply the result to the box state\n      if (response) {\n        fetch('https://smart-brain-faceapp1.herokuapp.com/image', {\n          method: 'put',\n          headers: {'content-Type': 'application/json'},\n          body: JSON.stringify({\n              id : this.state.user.id,\n          })\n        })\n        .then(response => response.json())\n        .then(count => {\n          this.setState(Object.assign(this.state.user, { entries: count }))\n        })\n        .catch(console.log)\n      }\n      this.displayFaceBox(this.calculateFaceLocation(response))\n    })\n    .catch(err => console.log(err)) //catch any error and console log the error\n  }\n\n  onRouteChange = (route) =>{\n    if (route === 'SignOut'){\n      this.setState(initialState)\n    } else if (route === 'home'){\n      this.setState({isSignedIn: true})\n    }\n    this.setState({route: route})\n  }\n\n  render(){\n    const { isSignedIn, imageUrl, route, box } = this.state // destructure states to avoid having to repeatedly type this.state.\n    return (\n      <div className=\"App\">\n        <Particles className=\"particles\"\n          params={particlesOptions} />\n        <Navigation isSignedIn={isSignedIn} onRouteChange={this.onRouteChange}/>\n        { route === 'home'\n          ? <div>\n            <Logo />\n            <Rank name={this.state.user.name} entries={this.state.user.entries} />\n            <ImageLinkForm\n              onInputChange={this.onInputChange}\n              onButtonSubmit={this.onButtonSubmit}\n            />\n            <FaceRecognition box={box} imageUrl={imageUrl} />\n          </div>\n          : ( route === 'SignIn'\n          ? <SignIn loadUser={this.loadUser} onRouteChange={this.onRouteChange}/>\n          : <Register loadUser={this.loadUser} onRouteChange={this.onRouteChange}/>\n          )\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}